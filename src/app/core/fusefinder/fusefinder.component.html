<div id="page">
    <div id="container">
        <div class="third">
            <p-card id="filters">
                Sort by stat:
                <p-dropdown autoWidth="true" [style]="{'width':'300px'}" [virtualScroll]="true"
                    [virtualScrollItemSize]="38" placeholder="Sort by?" [options]="sortOptions" optionLabel="name"
                    [(ngModel)]="selectedSort" (onChange)="updateFilters()"></p-dropdown><br>
                Filter by type:
                <p-dropdown autoWidth="true" [style]="{'width':'300px'}" [virtualScroll]="true"
                    [virtualScrollItemSize]="38" placeholder="Filter type by?" [options]="typeFilters"
                    optionLabel="name" [(ngModel)]="selectedFilter" (onChange)="updateFilters()"></p-dropdown><br>
                Filter by ability:
                <input type="text" pInputText (keyup)="updateFilters()" [(ngModel)]="abilitySearch" /><br>
                <div *ngFor="let filter of legendaryFilters" class="field-checkbox">
                    <p-radioButton name="category" (onClick)="updateFilters()" [value]="filter.filter"
                        [(ngModel)]="selectedLegendaryFilter"></p-radioButton>
                    <label class="ml-2">{{ filter.name }}</label>
                </div>
                <br>
                <div *ngFor="let slider of sliders; index as i" class="sliderContainer">
                    <label>{{slider.display}}</label>
                    <input type="number" pInputText [(ngModel)]="slider.minValue" />
                    <p-slider [(ngModel)]="slider.minValue" (onSlideEnd)="updateFilters()"
                        [max]="slider.maxValue"></p-slider>
                </div>
            </p-card>
        </div>
        <div class="third">
            <p-card id="list">
                <p-dropdown autoWidth="true" [filter]="true" [style]="{'width':'300px'}" [virtualScroll]="true"
                    [virtualScrollItemSize]="38" placeholder="Select a Pokemon" [options]="pokedex" optionLabel="name"
                    [(ngModel)]="selectedPokemon" (onChange)="update()"></p-dropdown>
                <p-virtualScroller [value]="filteredfusions" [style]="{'width': '100%'}" scrollHeight="500px"
                    [itemSize]="38">
                    <ng-template pTemplate="fusion" let-fusion>
                        <div (click)="selectFusion(fusion)" class="listRow">
                            <label style="cursor: pointer">Head: {{fusion.head}}</label>
                            <label style="cursor: pointer">| Body: {{fusion.body}}</label>
                            <label style="cursor: pointer">| BST: {{fusion.BST}}</label>
                            <label style="cursor: pointer">| Type: </label>
                            <div class="typeRow"><img *ngFor="let type of fusion.type" class="rowImg"
                                    src="../../../assets/types/{{type}}.png"></div>
                        </div>
                        <p-divider></p-divider>
                    </ng-template>
                </p-virtualScroller>
            </p-card>
        </div>
        <div class="third">
            <p-card *ngIf="selectedFusion" id="fusion">
                <img *ngIf="selectedFusion.imgName != null" [src]="selectedFusion.imgName"> <br>
                {{selectedFusion.name}} <br>
                <img *ngFor="let type of selectedFusion.type" src="../../../assets/types/{{type}}.png"><br>
                HP: {{selectedFusion.HP}} <br>
                Atk: {{selectedFusion.attack}}<br>
                Def: {{selectedFusion.defense}}<br>
                Sp. Atk: {{selectedFusion.spAttack}}<br>
                Sp. Def: {{selectedFusion.spDefense}}<br>
                Speed: {{selectedFusion.speed}}<br>
                BST: {{selectedFusion.BST}}<br>
                Abilities: {{selectedFusion.abilities | abilityDisplay}}<br>
                <br>
                Hidden abilities are denoted with brackets
            </p-card>
        </div>
    </div>
</div>